<html>
<head>
    <meta name = "viewport" content = "width = device-width">
    <title>Canvas Over truc Video</title>
    <script type="text/javascript">

	var can, vid, playButton, time, acc, posX, posY;

	function init() {
		vid = document.getElementById("vid");
		playButton = document.getElementById("play");
		can = document.getElementById("can");
		time = document.getElementById("curtime");
		acc = document.getElementById("curacc");
		vid.addEventListener('ended', vidEnd, false);
		posX = document.getElementById("posX");
		posY = document.getElementById("posY");
	}

	function playVideo() {
		if (playButton.value == "Play") {
			vid.play();
			playButton.value = "Pause";
		}
		else {
			vid.pause();
			playButton.value = "Play";		
		}
	}

	function avancer(){
		vid.currentTime += 10;
		time.innerText = vid.currentTime;
	}

	function reculer(){
		vid.currentTime -= 10;
		time.innerText = vid.currentTime;
	}
	
	function stop(){
		vid.currentTime = -1;
		vid.pause();
		if (playButton.value == "Pause") {
			playButton.value = "Play";		
		}
	}

	function vidEnd() {
		playButton.value = "Play";
		vid.playbackRate = 1;
		clearTimeout(vidTimer)
	}	

	
	function decelerer(){
		vid.playbackRate -= 0.25;
		vid.pause();
		vid.play();
		acc.innerText = vid.playbackRate;
	}

	function accelerer(){
		vid.playbackRate += 0.25;
		vid.pause();
		vid.play();
		acc.innerText = vid.playbackRate;
	}


    </script>
</head>

<body onload="init()">

    <video id="vid" width="512" height="288" style="position:absolute; top: 10; left: 10;">
	<source src="http://clips.vorwaerts-gmbh.de/VfE_html5.mp4" type="video/mp4"  /><!-- Safari / iOS, IE9 -->
	<source src="http://clips.vorwaerts-gmbh.de/VfE.webm"      type="video/webm" /><!-- Chrome10+, Ffx4+, Opera10.6+ -->
	<source src="http://clips.vorwaerts-gmbh.de/VfE.ogv"       type="video/ogg"  /><!-- Firefox3.6+ / Opera 10.5+ -->
    </video>

    <canvas id="can" height="288" width="512" style="position:absolute; top: 10; left: 10;" style="background-color:black">
    </canvas>

    <p style="position:absolute; top: 300; left: 30;"> 
	<input id="stop" type="button" value="[]" onclick="stop()" style="font:15pt Helvetica" />
	<input id="play" type="button" value="Play" onclick="playVideo()" style="font:15pt Helvetica" />
	<input id="arriere" type="button" value="<" onclick="reculer()" style="font:15pt Helvetica" />
	<input id="decc" type="button" value="dec" onclick="decelerer()" style="font:15pt Helvetica" />
	<input id="acc" type="button" value="acc" onclick="accelerer()" style="font:15pt Helvetica" />
	<input id="avant" type="button" value=">" onclick="avancer()" style="font:15pt Helvetica" />
	<br />
	

	<!-- Verifier pourquoi Ã§a ne fonctionne pas !! (Acc et decc) -->
	horloge courante : <span id ="curtime"></span>
	<br />
	acc courante : <span id ="curacc"></span>
	<br />
	position x : <span id ="posX"></span>
	<br />
	position y : <span id ="posY"></span>
    </p>

</body>
</html>
